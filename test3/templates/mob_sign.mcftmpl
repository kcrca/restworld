<%namespace file="mobs/mobs_base.mcftmpl" import="*"/>\
<%def name="sign_nbt(i, action)">Text${i+1}:"{\"text\":\"${lines[i]}\",\"clickEvent\":{\"action\":\"run_command\",\"value\":\"execute ${at_center()} run ${action}\"}}"</%def>
<%def name="sign_local_nbt(i, action)">Text${i+1}:"{\"text\":\"${lines[i]}\",\"clickEvent\":{\"action\":\"run_command\",\"value\":\"${action}\"}}"</%def>

execute at @e[tag=signer] run setblock ^${x} ^${y} ^${z} wall_sign[facing=${wall.facing}]{\
${sign_nbt(1, "summon %s ~ ~ ~ {Tags:[mobster]%s}" % (mob.id, mob.inner_nbt())},\
%if effect.name != "Off":
,${sign_local_nbt(3, "setblock ^%d ^0 ^%d emerald_block" % (wall.block_at[0], wall.block_at[1]))}\
%else
${sign_nbt(3, "tp @e[tag=mobster] @e[tag=death,limit=1]")
%endif
} replace
