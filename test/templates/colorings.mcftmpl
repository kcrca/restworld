scoreboard objectives add funcs dummy
execute unless score ${var} funcs matches -1.. run function ${var}_init
scoreboard players add ${var} funcs 1
execute unless score ${var} funcs matches 0..${len(colors) - 1} run scoreboard players set ${var} funcs 0

% for color in colors:

<% i = loop.index %> <%def name="when()">execute if score ${var} funcs matches ${i} run</%def>
${when()} fill ~0 ~3 ~3 ~-1 ~3 ~3 minecraft:${color.id}_stained_glass_pane
${when()} setblock ~0 ~4 ~3 minecraft:${color.id}_stained_glass_pane
${when()} setblock ~-1 ~3 ~2 minecraft:${color.id}_stained_glass
${when()} fill ~-2 ~3 ~1 ~-3 ~3 ~0 minecraft:${color.id}_wool
${when()} setblock ~-4 ~3 ~0 minecraft:${color.id}_banner[rotation=0]
${when()} fill ~-4 ~3 ~1 ~-6 ~3 ~1 minecraft:${color.id}_carpet
${when()} setblock ~-7 ~3 ~1 minecraft:${color.id}_concrete
${when()} fill ~-9 ~3 ~4 ~-10 ~3 ~4 minecraft:air
${when()} setblock ~-10 ~3 ~4 minecraft:${color.id}_bed[facing=west,part=head]
${when()} setblock ~-9 ~3 ~4 minecraft:${color.id}_bed[facing=west,part=foot]

${when()} data merge entity @e[tag=colorings_item_frame,limit=1] {Item:{id:${color.dye_name()}},Count:1,ItemRotation:0}

${when()} setblock ~-3 ~5 ~1 minecraft:${color.id}_terracotta
${when()} setblock ~-5 ~5 ~1 minecraft:${color.id}_shulker_box
${when()} setblock ~-7 ~5 ~1 minecraft:${color.id}_concrete_powder

${when()} data merge entity @e[tag=colorings_armor_stand,limit=1] {Item:{id:cocoa_beans},Count:1,ItemRotation:0}

${when()} data merge entity @e[tag=colorings_armor_stand,limit=1] {CustomName:"\"${color.name}\"",CustomNameVisible:True,ArmorItems:[{id:leather_boots,Count:1,tag:{Variant:2,display:{color:${color.rgb}}}},{id:leather_leggings,Count:1,tag:{Variant:2,display:{color:${color.rgb}}}},{id:leather_chestplate,Count:1,tag:{Variant:2,display:{color:${color.rgb}}}},{id:leather_helmet,Count:1,tag:{Variant:2,display:{color:${color.rgb}}}}]}
${when()} data merge entity @e[tag=colorings_llama,limit=1] {DecorItem:{id:${color.id}_carpet,Count:1},CustomNameVisible:True,CustomName:"\"${color.name}\""}

% endfor
