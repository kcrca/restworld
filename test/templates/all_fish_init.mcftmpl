<% import re %>

kill @e[type=tropical_fish,distance=0..10]

% for i in range(0, 12):
summon minecraft:tropical_fish ~${3 + i / 6} ~2.2 ~${int(i % 6)} {Tags:[fish${i}],NoAI:True,Silent:True,Rotation:[90f,0f]}
% endfor

% for i in range(0, 12):
<% tag, variants = fishes[i] %>\
summon minecraft:tropical_fish ~${0 + i / 6} ~2.2 ~${int(i % 6)} {Tags:[${tag}],Variant:${variants[0][0]},CustomName:${text(variants[0][1])},NoAI:True,Silent:True,Rotation:[90f,0f]}
% endfor

scoreboard objectives remove fish
scoreboard objectives add fish dummy
scoreboard players set NUM_COLORS fish 16
scoreboard players set body fish 0
scoreboard players set pattern fish 0
scoreboard players set BODY_SCALE fish 65536
scoreboard players set PATTERN_SCALE fish 16777216
execute at @e[type=armor_stand,name=mob_anchor] as @e[type=!player,dx=-40,dy=10,dz=40] run data merge entity @s {PersistenceRequired:True}
