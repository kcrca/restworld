<%namespace name="base"  file="base.mcftmpl"/>

<%base:loop collection="${command_blocks}" args="when,i,item">
${when(i)} setblock ~ ~3 ~ minecraft:${item.id}[facing=west,conditional=${str(item.conditional).lower()}]
<%
    words = item.name.split(' ')
    modifier = "" if len(words) == 2 else words[0]
%>\
${when(i)} data merge block ~-1 ~2 ~ {Text2:${text(modifier)},Text4:${text("(Conditional)" if item.conditional else "")}}
</%base:loop>
